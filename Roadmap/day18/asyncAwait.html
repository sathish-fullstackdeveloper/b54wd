<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch() and then() </title>
</head>

<body>
    <script>
        // fetch('https://restcountries.com/v3.1/all')
        //     .then((response) => {
        //         return response.json();
        //     })
        //     .then((countries) => {
        //         console.log(countries.map(country => country.flag).join(' '));
        //     })
        //     .catch((error) => {
        //         console.log('error fetching countries', error);
        //     })

        // let response = fetch('https://restcountries.com/v3.1/all'); // asynchronous call
        // let countries = response.json(); // asynchronous call
        // console.log(countries);

        // async function getCountries(){
        //     let response = await fetch('https://restcountries.com/v3.1/all');
        //     let countries = await response.json();
        //     console.log(countries);
        // }

        // getCountries();

        // with error handling
        async function getCountries() {
            try {
                let response = await fetch('https://restcountries.com/v3.1/all');

                if(response.ok){
                    let countries = await response.json();
                    console.log(countries);
                } else {
                    throw new Error('server error');
                }
            } catch(error){
                console.log('error fetching countries:', error.message);
            }
        }

        getCountries();

        /*
            status codes:

            1xx series: denotes that the request has been received and the process is continuing
            2xx series: denotes that the request was successful
            3xx series: denotes that the requeset was redirected to a different URL
            4xx series: denotes that the request was unsuccessful due to client error
            5xx series: denotes that the request was unsuccessful due to server error
        */
    </script>
</body>

</html>